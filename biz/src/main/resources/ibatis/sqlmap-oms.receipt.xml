<?xml version="1.0" encoding="GB2312"?>
<!DOCTYPE sqlMap
	PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"
	"http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="oms.receipt">
	
	<typeAlias alias="receipt" type="com.hsh24.sync.api.oms.bo.Receipt" />
	
	<select id="getReceipt" parameterClass="receipt" resultClass="receipt">
	<![CDATA[
		SELECT t.receipt_id AS receiptId,
			   t.receipt_no AS receiptNo,
			   DATE_FORMAT(t.create_date, '%Y-%m-%d %T') AS createDate,
			   p.trade_no AS tradeNo,
			   t.shop_id AS shopId,
			   p.sup_id AS supId,
			   t.create_user AS createUser,
			   t.modify_user AS modifyUser
		  FROM dms.dms_tb_receipt t, dms.dms_tb_trade p
		 WHERE t.trade_id = p.trade_id
		   AND t.state = 'U'
		   AND t.receipt_id = #receiptId#
	]]>
	</select>
	
	<select id="getWarehouse" parameterClass="java.lang.Long" resultClass="java.lang.String">
	<![CDATA[
		SELECT t.`warehouse_cd`
		  FROM oms.`main_warehouse_t` t
		 WHERE t.`org_id` = #shopId#
	]]>
	</select>
	
</sqlMap>